# –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ–ø–∏—Å—É –∫—Ä–æ–∫—É Motia –¥–ª—è Claude CLI

## üéØ –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è —Ç—Ä–∏—Å—Ç–æ—Ä–æ–Ω–Ω—å–æ–≥–æ –ø—Ä–æ–º–ø—Ç—É

–î–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–≤–Ω–æ–≥–æ –æ–ø–∏—Å—É –∫—Ä–æ–∫—É –∑ –î–†–ê–ö–û–ù –¥—ñ–∞–≥—Ä–∞–º–∞–º–∏ —Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é –ø–∞–ø–æ–∫, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **—Ç—Ä–∏—Å—Ç—É–ø–µ–Ω–µ–≤–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞**:

1. **CLAUDE.md** - –ë–∞–∑–æ–≤–∏–π Motia context (–∑–∞–≥–∞–ª—å–Ω—ñ –∑–Ω–∞–Ω–Ω—è)
2. **pattern-specific.md** - –ü–∞—Ç–µ—Ä–Ω-—Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏–π –ø—Ä–æ–º–ø—Ç (Observer, Command, —Ç–æ—â–æ)
3. **step-description.md** - –ü–æ–≤–Ω–∏–π –æ–ø–∏—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫—Ä–æ–∫—É –∑ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é

---

## üìÅ –®–∞–±–ª–æ–Ω step-description.md

```markdown
# {step-name} - –ü–æ–≤–Ω–∏–π –æ–ø–∏—Å –∫—Ä–æ–∫—É Motia

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫—Ä–æ–∫—É
```
{step-name}/
‚îú‚îÄ‚îÄ handler.ts                   # –õ–æ–≥—ñ–∫–∞ –∫—Ä–æ–∫—É
‚îú‚îÄ‚îÄ config.json                  # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Motia
‚îú‚îÄ‚îÄ schema.json                  # –°—Ö–µ–º–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ README.md                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ diagrams/                    # –î–†–ê–ö–û–ù –¥—ñ–∞–≥—Ä–∞–º–∏ –∫—Ä–æ–∫—É
‚îÇ   ‚îú‚îÄ‚îÄ logic-flow.drakon        # –û—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ error-handling.drakon    # –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ data-processing.drakon   # –û–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îî‚îÄ‚îÄ state-transitions.drakon # –ü–µ—Ä–µ—Ö–æ–¥–∏ —Å—Ç–∞–Ω—ñ–≤
‚îú‚îÄ‚îÄ tests/                       # Unit —Ç–∞ integration —Ç–µ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ handler.test.ts
‚îÇ   ‚îî‚îÄ‚îÄ integration/
‚îÇ       ‚îî‚îÄ‚îÄ flow.test.ts
‚îî‚îÄ‚îÄ docs/                        # –î–æ–¥–∞—Ç–∫–æ–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
    ‚îú‚îÄ‚îÄ api.md                   # API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
    ‚îú‚îÄ‚îÄ examples.md              # –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
    ‚îî‚îÄ‚îÄ troubleshooting.md       # –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º
```

## üìã –°–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∫—Ä–æ–∫—É

### –ë–∞–∑–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
- **–¢–∏–ø –∫—Ä–æ–∫—É**: {api|event|cron|stream}
- **–ü–∞—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç—É–≤–∞–Ω–Ω—è**: {observer|command|strategy|chain|template|state|mediator|factory}
- **–ú–æ–≤–∞ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è**: {typescript|python|ruby}
- **–û—Å–Ω–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è**: {–æ–ø–∏—Å–∞—Ç–∏ —â–æ —Ä–æ–±–∏—Ç—å –∫—Ä–æ–∫}

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (config.json)
```json
{
  "type": "{step-type}",
  "name": "{step-name}",
  "description": "{–æ–ø–∏—Å —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ}",
  "subscribes": ["{event-topics}"],
  "emits": ["{emitted-events}"],
  "path": "{api-path}",
  "method": "{http-method}",
  "flows": ["{flow-names}"],
  "compatibility_date": "2024-01-01"
}
```

### –°—Ö–µ–º–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó (schema.json)
```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "{input-field}": {
      "type": "{type}",
      "description": "{–æ–ø–∏—Å –ø–æ–ª—è}"
    }
  },
  "required": ["{required-fields}"]
}
```

## üé® –î–†–ê–ö–û–ù –¥—ñ–∞–≥—Ä–∞–º–∏

### logic-flow.drakon - –û—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞
```
–ó–ê–ì–û–õ–û–í–û–ö: {step-name} - –û—Å–Ω–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫
‚îú‚îÄ –ü–û–ß–ê–¢–û–ö
‚îú‚îÄ –î–Ü–Ø: –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ
‚îú‚îÄ –£–ú–û–í–ê: –î–∞–Ω—ñ –≤–∞–ª—ñ–¥–Ω—ñ?
‚îÇ  ‚îú‚îÄ –¢–ê–ö ‚Üí –î–Ü–Ø: –û–±—Ä–æ–±–∏—Ç–∏ –¥–∞–Ω—ñ
‚îÇ  ‚îî‚îÄ –ù–Ü ‚Üí –î–Ü–Ø: –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ –ø–æ–º–∏–ª–∫—É –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
‚îú‚îÄ –î–Ü–Ø: –í–∏–∫–æ–Ω–∞—Ç–∏ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫—É
‚îú‚îÄ –î–Ü–Ø: –ï–º—ñ—Ç—É–≤–∞—Ç–∏ –ø–æ–¥—ñ—ó
‚îî‚îÄ –ö–Ü–ù–ï–¶–¨
```

### error-handling.drakon - –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
```
–ó–ê–ì–û–õ–û–í–û–ö: {step-name} - –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
‚îú‚îÄ –ü–û–ß–ê–¢–û–ö
‚îú‚îÄ –£–ú–û–í–ê: –¢–∏–ø –ø–æ–º–∏–ª–∫–∏?
‚îÇ  ‚îú‚îÄ –í–∞–ª—ñ–¥–∞—Ü—ñ—è ‚Üí –î–Ü–Ø: –õ–æ–≥—É–≤–∞—Ç–∏ —è–∫ WARNING
‚îÇ  ‚îú‚îÄ –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ ‚Üí –î–Ü–Ø: –õ–æ–≥—É–≤–∞—Ç–∏ —è–∫ ERROR
‚îÇ  ‚îî‚îÄ –°–∏—Å—Ç–µ–º–∞ ‚Üí –î–Ü–Ø: –õ–æ–≥—É–≤–∞—Ç–∏ —è–∫ CRITICAL
‚îú‚îÄ –î–Ü–Ø: –°—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ response
‚îî‚îÄ –ö–Ü–ù–ï–¶–¨
```

### data-processing.drakon - –û–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö
```
–ó–ê–ì–û–õ–û–í–û–ö: {step-name} - –û–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö
‚îú‚îÄ –ü–û–ß–ê–¢–û–ö
‚îú‚îÄ –î–Ü–Ø: –ü–∞—Ä—Å–∏–Ω–≥ –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
‚îú‚îÄ –î–Ü–Ø: –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
‚îú‚îÄ –£–ú–û–í–ê: –ü–æ—Ç—Ä—ñ–±–Ω–æ –∑–±–µ—Ä–µ–≥—Ç–∏ —Å—Ç–∞–Ω?
‚îÇ  ‚îú‚îÄ –¢–ê–ö ‚Üí –î–Ü–Ø: ctx.state.set()
‚îÇ  ‚îî‚îÄ –ù–Ü ‚Üí –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏
‚îú‚îÄ –î–Ü–Ø: –ü—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏ –≤–∏—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ
‚îî‚îÄ –ö–Ü–ù–ï–¶–¨
```

### state-transitions.drakon - –ü–µ—Ä–µ—Ö–æ–¥–∏ —Å—Ç–∞–Ω—ñ–≤
```
–ó–ê–ì–û–õ–û–í–û–ö: {step-name} - –°—Ç–∞–Ω–∏
‚îú‚îÄ –ü–û–ß–ê–¢–û–ö
‚îú‚îÄ –£–ú–û–í–ê: –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω?
‚îÇ  ‚îú‚îÄ INITIAL ‚Üí –î–Ü–Ø: –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ PROCESSING
‚îÇ  ‚îú‚îÄ PROCESSING ‚Üí –î–Ü–Ø: –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ COMPLETED/FAILED
‚îÇ  ‚îî‚îÄ COMPLETED ‚Üí –î–Ü–Ø: –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ ARCHIVED
‚îî‚îÄ –ö–Ü–ù–ï–¶–¨
```

## üîß –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è

### handler.ts
```typescript
import { {HandlerType}, FlowContext } from "motia";

export const config = {
  // –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∑ config.json
};

export const handler: {HandlerType}<{InputType}, {EmitType}> = async (
  {input-params}, 
  ctx: FlowContext<{EmitType}>
) => {
  // –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –î–†–ê–ö–û–ù –¥—ñ–∞–≥—Ä–∞–º
  
  // 1. –í–∞–ª—ñ–¥–∞—Ü—ñ—è (logic-flow.drakon)
  // 2. –û–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö (data-processing.drakon)  
  // 3. –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ (error-handling.drakon)
  // 4. –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å—Ç–∞–Ω–æ–º (state-transitions.drakon)
  
  // –ï–º—ñ—Ç—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π
  await ctx.emit({ topic: "{emit-topic}", data: result });
};
```

### –¢–µ—Å—Ç–∏
```typescript
// tests/unit/handler.test.ts
describe("{step-name} handler", () => {
  test("should process valid input", async () => {
    // Unit test implementation
  });
  
  test("should handle validation errors", async () => {
    // Error handling test
  });
});

// tests/integration/flow.test.ts
describe("{step-name} integration", () => {
  test("should complete full flow", async () => {
    // Integration test implementation
  });
});
```

## üöÄ –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ó–∞–ø—É—Å–∫ –∫—Ä–æ–∫—É
```bash
# Event Step
npx motia emit {event-topic} '{{input-data}}'

# API Step  
curl -X {METHOD} http://localhost:8080{api-path} -d '{{request-body}}'

# Cron Step
npx motia cron trigger {cron-step-name}
```

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
```bash
# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
npx motia logs {step-name}

# –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞–Ω—É
npx motia state get {group-id} {key}

# –¢—Ä–µ–π—Å–∏–Ω–≥
npx motia trace {trace-id}
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

### README.md
```markdown
# {step-name}

{–û–ø–∏—Å —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ –∫—Ä–æ–∫—É}

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
{–ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è}

## –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
{–û–ø–∏—Å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å}

## API Reference
{–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API —è–∫—â–æ —î}
```

### docs/examples.md
```markdown
# –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è {step-name}

## –ë–∞–∑–æ–≤–∏–π –ø—Ä–∏–∫–ª–∞–¥
{–ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É}

## –†–æ–∑—à–∏—Ä–µ–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥
{–°–∫–ª–∞–¥–Ω—ñ—à–∏–π –ø—Ä–∏–∫–ª–∞–¥}
```

## üéØ –í–∏–º–æ–≥–∏ –¥–æ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó

1. **–í—Å—ñ —Ñ–∞–π–ª–∏ –º–∞—é—Ç—å –±—É—Ç–∏ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ** –∑–≥—ñ–¥–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏
2. **–î–†–ê–ö–û–ù –¥—ñ–∞–≥—Ä–∞–º–∏ –º–∞—é—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏** –ª–æ–≥—ñ—Ü—ñ handler.ts
3. **–¢–µ—Å—Ç–∏ –º–∞—é—Ç—å –ø–æ–∫—Ä–∏–≤–∞—Ç–∏** –æ—Å–Ω–æ–≤–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó —Ç–∞ edge cases
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –º–∞—î –±—É—Ç–∏ –ø–æ–≤–Ω–æ—é** –∑ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏
5. **–°—Ö–µ–º–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –º–∞—é—Ç—å –±—É—Ç–∏ –∫–æ—Ä–µ–∫—Ç–Ω–∏–º–∏** JSON Schema
6. **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –º–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏** —Ç–∏–ø—É –∫—Ä–æ–∫—É —Ç–∞ –ø–∞—Ç–µ—Ä–Ω—É
```