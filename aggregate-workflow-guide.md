# üéØ –ê–≥—Ä–µ–≥–∞—Ü—ñ—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ Motia Step –¥–ª—è Claude CLI

## –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è

–î–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–æ–≤–Ω–æ—ó –æ–ø–∏—Å–æ–≤–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –∫—Ä–æ–∫—É —è–∫ –∞—Ä–≥—É–º–µ–Ω—Ç—É –¥–ª—è Claude CLI, —Å—Ç–≤–æ—Ä–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó** –≤—Å—ñ—î—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –∑ –ø–∞–ø–∫–∏ –∫—Ä–æ–∫—É –≤ –æ–¥–∏–Ω markdown —Ñ–∞–π–ª.

```
–Ü—Å–Ω—É—é—á–∞ –ø–∞–ø–∫–∞ –∫—Ä–æ–∫—É:
{step-name}/
‚îú‚îÄ‚îÄ handler.ts
‚îú‚îÄ‚îÄ config.json  
‚îú‚îÄ‚îÄ schema.json
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ diagrams/
‚îÇ   ‚îú‚îÄ‚îÄ logic-flow.drakon
‚îÇ   ‚îú‚îÄ‚îÄ error-handling.drakon
‚îÇ   ‚îú‚îÄ‚îÄ data-processing.drakon
‚îÇ   ‚îî‚îÄ‚îÄ state-transitions.drakon
‚îú‚îÄ‚îÄ tests/
‚îî‚îÄ‚îÄ docs/

        ‚Üì –∞–≥—Ä–µ–≥–∞—Ü—ñ—è ‚Üì

–ü–æ–≤–Ω–∏–π markdown –æ–ø–∏—Å:
step-descriptions/{step-name}-complete.md

        ‚Üì Claude CLI ‚Üì

–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –∫–æ–¥
```

---

## üîß –ê–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω—ñ —Å–∫—Ä–∏–ø—Ç–∏

### **1. –ê–≥—Ä–µ–≥–∞—Ü—ñ—è —ñ—Å–Ω—É—é—á–æ–≥–æ –∫—Ä–æ–∫—É**
```bash
# –ó–±–∏—Ä–∞—î –≤—Å—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –∑ –ø–∞–ø–∫–∏ –≤ –æ–¥–∏–Ω markdown
./aggregate-step-to-md.sh ./existing-user-step user-step-complete
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: `step-descriptions/user-step-complete.md` –º—ñ—Å—Ç–∏—Ç—å:
- –°—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–∫–∏
- –í–µ—Å—å –∫–æ–¥ (handler.ts/py)
- –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é (config.json, schema.json)
- –î–†–ê–ö–û–ù –¥—ñ–∞–≥—Ä–∞–º–∏
- –¢–µ—Å—Ç–∏ —Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é
- –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è Claude CLI

### **2. –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∏–π workflow**
```bash
# –ê–≥—Ä–µ–≥–∞—Ü—ñ—è + –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ–≥–æ –∫–æ–¥—É
./motia-claude-workflow.sh aggregate-and-generate ./existing-step observer
```

---

## üöÄ –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### **–°—Ü–µ–Ω–∞—Ä—ñ–π 1: –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —ñ—Å–Ω—É—é—á–æ–≥–æ –∫—Ä–æ–∫—É**
```bash
# –£ –≤–∞—Å —î –ø–∞–ø–∫–∞ –∑ –∫—Ä–æ–∫–æ–º, —è–∫–∏–π –ø–æ—Ç—Ä–µ–±—É—î –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è
./motia-claude-workflow.sh aggregate-and-generate ./legacy-payment-step command

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# 1. step-descriptions/legacy-payment-step-optimized.md
# 2. –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –∫–æ–¥ –≤—ñ–¥ Claude CLI –∑:
#    - –ü–æ–∫—Ä–∞—â–µ–Ω–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é
#    - –û–Ω–æ–≤–ª–µ–Ω–∏–º–∏ –î–†–ê–ö–û–ù –¥—ñ–∞–≥—Ä–∞–º–∞–º–∏  
#    - –°—É—á–∞—Å–Ω–∏–º–∏ best practices
```

### **–°—Ü–µ–Ω–∞—Ä—ñ–π 2: –ê–Ω–∞–ª—ñ–∑ —Ç–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥**
```bash
# –¢—ñ–ª—å–∫–∏ –∞–≥—Ä–µ–≥–∞—Ü—ñ—è –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É
./aggregate-step-to-md.sh ./complex-order-processor analysis-ready

# –ü–æ—Ç—ñ–º —Ä—É—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º–∏ –≤–∏–º–æ–≥–∞–º–∏:
claude --append-system-prompt "$(cat CLAUDE.md)" \
       --append-system-prompt "$(cat patterns/chain-responsibility.md)" \
       -p "$(cat step-descriptions/analysis-ready.md)

–î–û–î–ê–¢–ö–û–í–Ü –í–ò–ú–û–ì–ò:
- –†–æ–∑–¥—ñ–ª–∏ —Å–∫–ª–∞–¥–Ω—É –ª–æ–≥—ñ–∫—É –Ω–∞ –º–µ–Ω—à—ñ –∫—Ä–æ–∫–∏
- –î–æ–¥–∞–π comprehensive error handling
- –°—Ç–≤–æ—Ä–∏ Chain of Responsibility –¥–ª—è validation"
```

### **–°—Ü–µ–Ω–∞—Ä—ñ–π 3: –ú—ñ–≥—Ä–∞—Ü—ñ—è –º—ñ–∂ –ø–∞—Ç–µ—Ä–Ω–∞–º–∏**
```bash
# –ê–≥—Ä–µ–≥—É–≤–∞—Ç–∏ —ñ—Å–Ω—É—é—á–∏–π –∫—Ä–æ–∫
./aggregate-step-to-md.sh ./old-notification-step notification-analysis

# –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∑ –Ω–æ–≤–∏–º –ø–∞—Ç–µ—Ä–Ω–æ–º
./motia-claude-workflow.sh generate step-descriptions/notification-analysis.md strategy

# –†–µ–∑—É–ª—å—Ç–∞—Ç: –¢–æ–π –∂–µ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª, –∞–ª–µ –∑ Strategy pattern –∑–∞–º—ñ—Å—Ç—å —Å—Ç–∞—Ä–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É
```

---

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–≥—Ä–µ–≥–æ–≤–∞–Ω–æ–≥–æ markdown —Ñ–∞–π–ª—É

```markdown
# {step-name} - –ü–æ–≤–Ω–∏–π –∞–≥—Ä–µ–≥–æ–≤–∞–Ω–∏–π –æ–ø–∏—Å –∫—Ä–æ–∫—É Motia

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫—Ä–æ–∫—É
[–ü–æ–≤–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏]

## üìã –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∫—Ä–æ–∫—É
### config.json
[–í–º—ñ—Å—Ç config.json]

### schema.json  
[–í–º—ñ—Å—Ç schema.json]

## üîß –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫—Ä–æ–∫—É
### handler.ts/py/rb
[–ü–æ–≤–Ω–∏–π –∫–æ–¥ handler]

## üé® –î–†–ê–ö–û–ù –¥—ñ–∞–≥—Ä–∞–º–∏
### logic-flow.drakon
[–í–º—ñ—Å—Ç –¥—ñ–∞–≥—Ä–∞–º–∏ –æ—Å–Ω–æ–≤–Ω–æ—ó –ª–æ–≥—ñ–∫–∏]

### error-handling.drakon
[–í–º—ñ—Å—Ç –¥—ñ–∞–≥—Ä–∞–º–∏ –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫]

### data-processing.drakon
[–í–º—ñ—Å—Ç –¥—ñ–∞–≥—Ä–∞–º–∏ –æ–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö]

### state-transitions.drakon
[–í–º—ñ—Å—Ç –¥—ñ–∞–≥—Ä–∞–º–∏ –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤ —Å—Ç–∞–Ω—ñ–≤]

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –∫—Ä–æ–∫—É
[–í–º—ñ—Å—Ç README.md]

## üß™ –¢–µ—Å—Ç–∏
[–í—Å—ñ —Ç–µ—Å—Ç–æ–≤—ñ —Ñ–∞–π–ª–∏]

## üìñ –î–æ–¥–∞—Ç–∫–æ–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
[–§–∞–π–ª–∏ –∑ –ø–∞–ø–∫–∏ docs/]

## üéØ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è Claude CLI
[–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó]
```

---

## üéõÔ∏è –ö–æ–º–∞–Ω–¥–∏ Claude CLI

### **–ë–∞–∑–æ–≤–∞ –∫–æ–º–∞–Ω–¥–∞ –∑ –∞–≥—Ä–µ–≥–æ–≤–∞–Ω–∏–º –æ–ø–∏—Å–æ–º**
```bash
claude --append-system-prompt "$(cat CLAUDE.md)" \
       --append-system-prompt "$(cat patterns/observer-pattern.md)" \
       -p "$(cat step-descriptions/user-step-complete.md)"
```

### **–†–æ–∑—à–∏—Ä–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º–∏ –≤–∏–º–æ–≥–∞–º–∏**
```bash
claude --append-system-prompt "$(cat CLAUDE.md)" \
       --append-system-prompt "$(cat patterns/command-pattern.md)" \
       -p "$(cat step-descriptions/api-step-complete.md)

–°–ü–ï–¶–Ü–ê–õ–¨–ù–Ü –í–ò–ú–û–ì–ò:
- –î–æ–¥–∞–π OpenAPI —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—é
- –í–∫–ª—é—á–∏ rate limiting
- –°—Ç–≤–æ—Ä–∏ comprehensive error responses
- –î–æ–¥–∞–π metrics collection"
```

### **–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —Ä–µ–∂–∏–º –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –∑–º—ñ–Ω**
```bash
# –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
claude --append-system-prompt "$(cat CLAUDE.md)" \
       --append-system-prompt "$(cat patterns/strategy-pattern.md)" \
       --continue

# –í —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ:
> –û—Å—å –ø–æ–≤–Ω–∏–π –æ–ø–∏—Å –∫—Ä–æ–∫—É: $(cat step-descriptions/notification-step-complete.md)
> 
> –ü–æ—Ç—Ä—ñ–±–Ω–æ:
> 1. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑ Strategy pattern
> 2. –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –∫–∞–Ω–∞–ª—ñ–≤ —Å–ø–æ–≤—ñ—â–µ–Ω—å  
> 3. –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è error handling
> 4. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–µ—Ç–∞–ª—å–Ω–∏—Ö –î–†–ê–ö–û–ù –¥—ñ–∞–≥—Ä–∞–º
```

---

## üîÑ Workflow —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

### **–ü–æ–≤–Ω–∏–π —Ü–∏–∫–ª —Ä–æ–∑—Ä–æ–±–∫–∏**
```bash
# 1. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∫—Ä–æ–∫—É
./motia-claude-workflow.sh full-cycle user-manager api command "CRUD API –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤"

# 2. –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —ñ—Å–Ω—É—é—á–æ–≥–æ –∫—Ä–æ–∫—É  
./motia-claude-workflow.sh aggregate-and-generate ./legacy-step observer

# 3. –ê–Ω–∞–ª—ñ–∑ –±–µ–∑ –∑–º—ñ–Ω
./motia-claude-workflow.sh aggregate ./existing-step analysis-only
```

### **–ü–æ–∫—Ä–æ–∫–æ–≤–∏–π –ø—ñ–¥—Ö—ñ–¥**
```bash
# –ö—Ä–æ–∫ 1: –ê–≥—Ä–µ–≥–∞—Ü—ñ—è
./aggregate-step-to-md.sh ./my-step my-step-full

# –ö—Ä–æ–∫ 2: –†—É—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º
claude --append-system-prompt "$(cat CLAUDE.md)" \
       --append-system-prompt "$(cat patterns/chain-responsibility.md)" \
       -p "$(cat step-descriptions/my-step-full.md)"
```

---

## üí° –ü–µ—Ä–µ–≤–∞–≥–∏ –ø—ñ–¥—Ö–æ–¥—É

### **1. –ü–æ–≤–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è**
- –û–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç –∑–±–∏—Ä–∞—î –≤—Å—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –∑ –ø–∞–ø–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ markdown

### **2. –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É**  
- –í—Å—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫—Ä–æ–∫ –≤ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—ñ
- –î–†–ê–ö–û–ù –¥—ñ–∞–≥—Ä–∞–º–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω—ñ –∑ –∫–æ–¥–æ–º
- –¢–µ—Å—Ç–∏ —Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –≤–∫–ª—é—á–µ–Ω—ñ

### **3. –ì–Ω—É—á–∫—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**
- –ú–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —è–∫ –ø–æ–≤–Ω–∏–π workflow
- –ê–±–æ –ø–æ–∫—Ä–æ–∫–æ–≤–æ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—é
- –õ–µ–≥–∫–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –≤–∏–º–æ–≥–∏

### **4. –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤**
- Claude –æ—Ç—Ä–∏–º—É—î –ø–æ–≤–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é
- –ì–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π –∫–æ–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —ñ—Å–Ω—É—é—á—ñ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ  
- –î–†–ê–ö–û–ù –¥—ñ–∞–≥—Ä–∞–º–∏ —Ç–æ—á–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å –ª–æ–≥—ñ–∫—É

–¶–µ–π –ø—ñ–¥—Ö—ñ–¥ –¥–æ–∑–≤–æ–ª—è—î –≤–∞–º –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–ø–∏—Å–æ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫—Ä–æ–∫—É –∑ —É—Å—ñ–º–∞ –î–†–ê–ö–û–ù —Å—Ö–µ–º–∞–º–∏ —Ç–∞ –¥–æ–¥–∞—Ç–∫–æ–≤–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é —è–∫ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç –¥–ª—è Claude CLI, –∑–∞–±–µ–∑–ø–µ—á—É—é—á–∏ –≤–∏—Å–æ–∫–æ—è–∫—ñ—Å–Ω—É –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—é Motia –∫—Ä–æ–∫—ñ–≤.