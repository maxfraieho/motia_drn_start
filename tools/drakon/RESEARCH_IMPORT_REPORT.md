# –ó–≤—ñ—Ç –ø—Ä–æ —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∏–π —ñ–º–ø–æ—Ä—Ç –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å DRAKON

**–î–∞—Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:** 2025-10-10
**–î–∂–µ—Ä–µ–ª–æ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å:** `/home/vokov/motia/tools/drakon/perplexity/drndew/drndew.md`
**–û–±—Å—è–≥ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å:** ~50,740 —Ç–æ–∫–µ–Ω—ñ–≤ (5,508 —Ä—è–¥–∫—ñ–≤)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–°–ü–Ü–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û

---

## üìä –†–µ–∑—é–º–µ –≤–∏–∫–æ–Ω–∞–Ω–æ—ó —Ä–æ–±–æ—Ç–∏

### –í–∏–∫–æ–Ω–∞–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è

‚úÖ **1. –ü–æ–≤–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å**
- –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–æ 2 –∫–æ–º–ø–ª–µ–∫—Å–Ω–∏—Ö –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è (Perplexity + Claude Sonnet)
- –í–∏—è–≤–ª–µ–Ω–æ 23 —Ç–∏–ø–∏ DRAKON —ñ–∫–æ–Ω–æ–∫
- –î–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–æ –ø–æ–≤–Ω—ñ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—ó .drn (SQLite) —Ç–∞ .json —Ñ–æ—Ä–º–∞—Ç—ñ–≤
- –í–∏—è–≤–ª–µ–Ω–æ 10 –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö gotchas —Ç–∞ –ø—ñ–¥–≤–æ–¥–Ω–∏—Ö –∫–∞–º–µ–Ω—ñ–≤

‚úÖ **2. –ê–Ω–∞–ª—ñ–∑ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Å—Ç–∞–Ω—É –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ñ–≤**
- `drakon_to_drn.py` - –≤–∏—è–≤–ª–µ–Ω–æ 4 –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏
- `drakon_to_json.py` - –≤–∏—è–≤–ª–µ–Ω–æ 4 –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏
- `generate_step_diagrams.py` - –≤–∏—è–≤–ª–µ–Ω–æ 3 –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏

‚úÖ **3. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Knowledge Base**
–°—Ç–≤–æ—Ä–µ–Ω–æ 4 —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–∏—Ö —Ñ–∞–π–ª–∏:
- `knowledge_base/drn_complete_schema.sql` - –ø–æ–≤–Ω–∞ SQLite —Å—Ö–µ–º–∞
- `knowledge_base/icon_types.json` - –¥–æ–≤—ñ–¥–Ω–∏–∫ —Ç–∏–ø—ñ–≤ —ñ–∫–æ–Ω–æ–∫ (23 —Ç–∏–ø–∏)
- `knowledge_base/validation_rules.json` - –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
- `knowledge_base/gotchas.md` - –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø–æ–º–∏–ª–∫–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è
- `knowledge_base/conversion_guide.md` - –≥–∞–π–¥ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó —Ñ–æ—Ä–º–∞—Ç—ñ–≤

---

## üîç –í–∏—è–≤–ª–µ–Ω—ñ –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏

### drakon_to_drn.py

#### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ–ø–æ–≤–Ω–∞ —Å—Ö–µ–º–∞ SQLite
**–í—ñ–¥—Å—É—Ç–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ:**
- `info` - –º–µ—Ç–∞–¥–∞–Ω—ñ —Ñ–∞–π–ª—É (type, version)
- `state` - –≥–ª–æ–±–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω
- `diagram_info` - –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –¥—ñ–∞–≥—Ä–∞–º
- `tree_nodes` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–µ—Ä–µ–≤–∞ –ø—Ä–æ–µ–∫—Ç—É

**–í—ñ–¥—Å—É—Ç–Ω—ñ –ø–æ–ª—è –≤ items:**
- `text2` - –≤—Ç–æ—Ä–∏–Ω–Ω–∏–π —Ç–µ–∫—Å—Ç
- `a, b` - —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
- `color` - –∫–æ–ª—ñ—Ä (—Ñ–æ—Ä–º–∞—Ç: "fg #rrggbb bg #rrggbb")

**–í–ø–ª–∏–≤:** –§–∞–π–ª–∏ –Ω–µ—Å—É–º—ñ—Å–Ω—ñ –∑ DRAKON Editor

#### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–∞ —Å–∏—Å—Ç–µ–º–∞
**–ü–æ—Ç–æ—á–Ω–∏–π –∫–æ–¥:**
```python
# WRONG: –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø–æ–≤–Ω—É —à–∏—Ä–∏–Ω—É/–≤–∏—Å–æ—Ç—É
icon = DrakonIcon(w=120, h=40)
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```python
# CORRECT: w —Ç–∞ h - —Ü–µ –ü–û–õ–û–í–ò–ù–ê —Ä–æ–∑–º—ñ—Ä—ñ–≤
icon = DrakonIcon(w=60, h=20)  # –î–ª—è —ñ–∫–æ–Ω–∫–∏ 120x40
```

**–í–ø–ª–∏–≤:** –Ü–∫–æ–Ω–∫–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –≤–¥–≤—ñ—á—ñ –±—ñ–ª—å—à–∏–º–∏

#### –ü—Ä–æ–±–ª–µ–º–∞ 3: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ links
**–ü–æ—Ç–æ—á–Ω–∏–π –∫–æ–¥:** –°—Ç–≤–æ—Ä—é—î –æ–∫—Ä–µ–º—É —Ç–∞–±–ª–∏—Ü—é `links`

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ñ—ñ—Ü—ñ–π–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç .drn –ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ç–∞–±–ª–∏—Ü—é links. –ó–≤'—è–∑–∫–∏ –≤–∏–≤–æ–¥—è—Ç—å—Å—è –∑ –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω–∏—Ö –ø–æ–∑–∏—Ü—ñ–π —ñ–∫–æ–Ω–æ–∫.

**–í–ø–ª–∏–≤:** –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –Ω–µ—Å—É–º—ñ—Å–Ω–∞ –∑ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–º —Ñ–æ—Ä–º–∞—Ç–æ–º

#### –ü—Ä–æ–±–ª–µ–º–∞ 4: –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –ª—ñ–Ω—ñ–π
–ù–µ–º–∞—î –∫–ª–∞—Å—É –¥–ª—è horizontal/vertical –ª—ñ–Ω—ñ–π, —è–∫—ñ —î –æ–∫—Ä–µ–º–∏–º–∏ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏ –≤ items —Ç–∞–±–ª–∏—Ü—ñ.

---

### drakon_to_json.py

#### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON
**–ü–æ—Ç–æ—á–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```json
{
  "diagram": {
    "name": "...",
    "nodes": [...],
    "links": [...]
  }
}
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```json
{
  "name": "...",
  "access": "write",
  "items": {"1": {...}, "2": {...}}
}
```

**–í–ø–ª–∏–≤:** –§–∞–π–ª–∏ –Ω–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞—é—Ç—å—Å—è DrakonHub/DrakonWidget

#### –ü—Ä–æ–±–ª–µ–º–∞ 2: –í—ñ–¥—Å—É—Ç–Ω—î –æ–±–æ–≤'—è–∑–∫–æ–≤–µ –ø–æ–ª–µ access
JSON —Ñ–æ—Ä–º–∞—Ç –≤–∏–º–∞–≥–∞—î –ø–æ–ª–µ `access` –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º "read" –∞–±–æ "write"

#### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –Ω–∞–∑–≤–∏ –ø–æ–ª—ñ–≤
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `text` –∑–∞–º—ñ—Å—Ç—å `content`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `nodes` –∑–∞–º—ñ—Å—Ç—å `items`
- items –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ —Å–ª–æ–≤–Ω–∏–∫–æ–º, –Ω–µ –º–∞—Å–∏–≤–æ–º

#### –ü—Ä–æ–±–ª–µ–º–∞ 4: –û–∫—Ä–µ–º–∏–π –º–∞—Å–∏–≤ links
–ó–≤'—è–∑–∫–∏ –Ω–µ –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –æ–∫—Ä–µ–º–∏–º –º–∞—Å–∏–≤–æ–º, –∞ –º–∞—é—Ç—å –±—É—Ç–∏ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—è–º–∏ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (`one`, `two`, `side`)

---

### generate_step_diagrams.py

#### –ü—Ä–æ–±–ª–µ–º–∞ 1: –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å branch header
–ì–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –¥—ñ–∞–≥—Ä–∞–º–∏ –Ω–µ –º–∞—é—Ç—å –æ–±–æ–≤'—è–∑–∫–æ–≤–æ–≥–æ branch header –Ω–∞ –ø–æ—á–∞—Ç–∫—É.

**–í–ø–ª–∏–≤:** –î—ñ–∞–≥—Ä–∞–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ –Ω–µ–≤–∞–ª—ñ–¥–Ω—ñ

#### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ–º–∞—î auto-layout –¥–ª—è .drn
–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó .drn —Ñ–æ—Ä–º–∞—Ç—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Å–ø—Ä–æ—â–µ–Ω–∏–π layout, —è–∫–∏–π –Ω–µ –≤—Ä–∞—Ö–æ–≤—É—î –æ—Ñ—ñ—Ü—ñ–π–Ω—ñ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—ó.

#### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ–º–∞—î –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó Royal Road
–ù–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –¥–æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–∏–Ω—Ü–∏–ø—É Royal Road (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∏–π –æ—Å–Ω–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫).

---

## üìö –°—Ç–≤–æ—Ä–µ–Ω–∞ Knowledge Base

### 1. drn_complete_schema.sql
**–†–æ–∑–º—ñ—Ä:** 462 —Ä—è–¥–∫–∏
**–ó–º—ñ—Å—Ç:**
- –ü–æ–≤–Ω–∞ SQLite —Å—Ö–µ–º–∞ (5 —Ç–∞–±–ª–∏—Ü—å)
- –î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏
- –ü—Ä–∏–∫–ª–∞–¥–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–∫–æ–Ω–æ–∫
- –í–∞–ª—ñ–¥–∞—Ü—ñ–π–Ω—ñ –∑–∞–ø–∏—Ç–∏

**–ö–ª—é—á–æ–≤—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ (x, y) = –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω–∏–π —Ü–µ–Ω—Ç—Ä
- –†–æ–∑–º—ñ—Ä–∏ (w, h) = –ü–û–õ–û–í–ò–ù–ê —à–∏—Ä–∏–Ω–∏/–≤–∏—Å–æ—Ç–∏
- origin —É —Ñ–æ—Ä–º–∞—Ç—ñ TCL list: "x y"
- 23 —Ç–∏–ø–∏ —ñ–∫–æ–Ω–æ–∫ –∑ —Ä–æ–∑–º—ñ—Ä–∞–º–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

### 2. icon_types.json
**–†–æ–∑–º—ñ—Ä:** 337 —Ä—è–¥–∫—ñ–≤
**–ó–º—ñ—Å—Ç:**
- –ü–æ–≤–Ω–∏–π –¥–æ–≤—ñ–¥–Ω–∏–∫ 23 —Ç–∏–ø—ñ–≤ —ñ–∫–æ–Ω–æ–∫
- –û–ø–∏—Å –ø–æ–ª—ñ–≤ text/text2
- –°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ a/b
- –ü—Ä–∞–≤–∏–ª–∞ –∑–≤'—è–∑–∫—ñ–≤ (connections)
- –¢–∏–ø–∏ –ª—ñ–Ω—ñ–π (horizontal/vertical)

**–ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø–∏—Å—É:**
```json
{
  "action": {
    "name": "Action",
    "shape": "rectangle",
    "default_size": {"width": 120, "height": 40},
    "connections": {"down": 1, "right": 0},
    "fields": {"text": "Primary text", "text2": null},
    "special_params": {"a": "unused", "b": "unused"}
  }
}
```

### 3. validation_rules.json
**–†–æ–∑–º—ñ—Ä:** 241 —Ä—è–¥–æ–∫
**–ó–º—ñ—Å—Ç:**
- –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è (6 –ø—Ä–∞–≤–∏–ª)
- –¢–æ–ø–æ–ª–æ–≥—ñ—á–Ω—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è (5 –ø—Ä–∞–≤–∏–ª)
- –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è (5 –ø—Ä–∞–≤–∏–ª)
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è (3 –ø—Ä–∞–≤–∏–ª–∞)
- –ü—Ä–∞–≤–∏–ª–∞ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –¥–ª—è —Ç–∏–ø—ñ–≤ —ñ–∫–æ–Ω–æ–∫
- JSON/DRN —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞

**–ü—Ä–∏–∫–ª–∞–¥ –ø—Ä–∞–≤–∏–ª–∞:**
```json
{
  "rule_id": "STRUCT-001",
  "severity": "CRITICAL",
  "rule": "must_have_branch",
  "description": "Every diagram must contain at least one branch icon",
  "error_message": "Diagram has no branch header",
  "fix": "Add a branch icon as the first element"
}
```

### 4. gotchas.md
**–†–æ–∑–º—ñ—Ä:** 464 —Ä—è–¥–∫–∏
**–ó–º—ñ—Å—Ç:**
- 10 –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö gotchas –∑ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏ –∫–æ–¥—É
- –í—ñ–∑—É–∞–ª—å–Ω—ñ —Ç–∞ –≤–∏–∫–æ–Ω–∞–≤—á—ñ –ø–æ–º–∏–ª–∫–∏
- –§–æ—Ä–º–∞—Ç-—Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –ø—ñ–¥–≤–æ–¥–Ω—ñ –∫–∞–º–µ–Ω—ñ
- –ß–µ–∫–ª—ñ—Å—Ç–∏ –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
- –®–≤–∏–¥–∫—ñ –¥–æ–≤—ñ–¥–∫–æ–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ

**–¢–æ–ø-3 –Ω–∞–π–∫—Ä–∏—Ç–∏—á–Ω—ñ—à—ñ gotchas:**
1. Half-Width/Half-Height Confusion
2. Center vs Corner Positioning
3. Branch Execution Order

### 5. conversion_guide.md
**–†–æ–∑–º—ñ—Ä:** 578 —Ä—è–¥–∫—ñ–≤
**–ó–º—ñ—Å—Ç:**
- –ü–æ–≤–Ω–∏–π –≥–∞–π–¥ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó .drn ‚Üî .json
- –ü–æ–∫—Ä–æ–∫–æ–≤–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –∑ –∫–æ–¥–æ–º
- –†–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑–≤'—è–∑–∫—ñ–≤ –∑ –≥–µ–æ–º–µ—Ç—Ä—ñ—ó
- –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ layout –ø–æ–∑–∏—Ü—ñ–π
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—ñ—Å–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó
- –ü–æ–≤–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ round-trip —Ç–µ—Å—Ç—É

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –∫—Ä–æ–∫—ñ–≤

### –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–Ω—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è (–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: –í–ò–°–û–ö–ò–ô)

#### 1.1 –û–Ω–æ–≤–∏—Ç–∏ drakon_to_drn.py
```bash
# –§–∞–π–ª: /home/vokov/motia/tools/drakon/converter/drakon_to_drn.py
```

**–ó–º—ñ–Ω–∏:**
- [ ] –î–æ–¥–∞—Ç–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ (info, state, diagram_info, tree_nodes)
- [ ] –î–æ–¥–∞—Ç–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ –ø–æ–ª—è –¥–æ items (text2, a, b, color, aux_value)
- [ ] –í–∏–ø—Ä–∞–≤–∏—Ç–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω—É —Å–∏—Å—Ç–µ–º—É (w/h = –ø–æ–ª–æ–≤–∏–Ω–∞)
- [ ] –í–∏–¥–∞–ª–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é links
- [ ] –î–æ–¥–∞—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É horizontal/vertical –ª—ñ–Ω—ñ–π
- [ ] –û–Ω–æ–≤–∏—Ç–∏ DrakonIcon dataclass

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–≤–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑ DRAKON Editor

#### 1.2 –û–Ω–æ–≤–∏—Ç–∏ drakon_to_json.py
```bash
# –§–∞–π–ª: /home/vokov/motia/tools/drakon/converter/drakon_to_json.py
```

**–ó–º—ñ–Ω–∏:**
- [ ] –í–∏–¥–∞–ª–∏—Ç–∏ –æ–±–≥–æ—Ä—Ç–∫—É "diagram"
- [ ] –ó–º—ñ–Ω–∏—Ç–∏ "nodes" ‚Üí "items" (—Å–ª–æ–≤–Ω–∏–∫!)
- [ ] –î–æ–¥–∞—Ç–∏ –æ–±–æ–≤'—è–∑–∫–æ–≤–µ –ø–æ–ª–µ "access"
- [ ] –ó–º—ñ–Ω–∏—Ç–∏ "text" ‚Üí "content"
- [ ] –ü–µ—Ä–µ–º—ñ—Å—Ç–∏—Ç–∏ –∑–≤'—è–∑–∫–∏ –≤ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ (one, two)
- [ ] –ö–æ–Ω–≤–µ—Ä—Ç—É–≤–∞—Ç–∏ style –≤ JSON string
- [ ] –í–∏–¥–∞–ª–∏—Ç–∏ –æ–∫—Ä–µ–º–∏–π –º–∞—Å–∏–≤ links

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–≤–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑ DrakonHub/DrakonWidget

#### 1.3 –û–Ω–æ–≤–∏—Ç–∏ generate_step_diagrams.py
```bash
# –§–∞–π–ª: /home/vokov/motia/tools/drakon/converter/generate_step_diagrams.py
```

**–ó–º—ñ–Ω–∏:**
- [ ] –ó–∞–≤–∂–¥–∏ –¥–æ–¥–∞–≤–∞—Ç–∏ branch header (branchId: 0)
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ auto-layout –¥–ª—è .drn —Ñ–æ—Ä–º–∞—Ç—É
- [ ] –î–æ–¥–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é Royal Road –ø—Ä–∏–Ω—Ü–∏–ø—É
- [ ] –î–æ–¥–∞—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É error handling –≥—ñ–ª–æ–∫

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í–∞–ª—ñ–¥–Ω—ñ –¥—ñ–∞–≥—Ä–∞–º–∏ –¥–ª—è Motia Steps

---

### –§–∞–∑–∞ 2: –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ (–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: –°–ï–†–ï–î–ù–Ü–ô)

#### 2.1 –î–æ–¥–∞—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –Ω–æ–≤–∏—Ö —Ç–∏–ø—ñ–≤ —ñ–∫–æ–Ω–æ–∫
–ü–æ—Ç–æ—á–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è: 12 —Ç–∏–ø—ñ–≤
–ü–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏: 11 —Ç–∏–ø—ñ–≤

- [ ] shelf (–¥–≤–æ—Ç–µ–∫—Å—Ç–æ–≤–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
- [ ] input, output (–≤—Ö—ñ–¥/–≤–∏—Ö—ñ–¥)
- [ ] process (–ø—Ä–æ—Ü–µ—Å)
- [ ] timer, pause, duration (—á–∞—Å–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó)
- [ ] parblock, par (–ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –±–ª–æ–∫–∏)
- [ ] ctrlstart, ctrlend (state machines)
- [ ] drakon-image (–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è)
- [ ] insertion (–≤–∏–∫–ª–∏–∫ –ø—ñ–¥–ø—Ä–æ–≥—Ä–∞–º–∏)

#### 2.2 –°—Ç–≤–æ—Ä–∏—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ç–æ—Ä
```python
# –ù–æ–≤–∏–π —Ñ–∞–π–ª: /home/vokov/motia/tools/drakon/validator/diagram_validator.py
```

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
- –°—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è
- –¢–æ–ø–æ–ª–æ–≥—ñ—á–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–æ—Å–∏–ª–∞–Ω—å
- –§–æ—Ä–º–∞—Ç-—Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–≤—ñ—Ç—ñ–≤ –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏

#### 2.3 –ù–∞–ø–∏—Å–∞—Ç–∏ unit tests
```python
# –ù–æ–≤–∏–π —Ñ–∞–π–ª: /home/vokov/motia/tools/drakon/tests/test_converters.py
```

**–¢–µ—Å—Ç–∏:**
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è SQLite schema
- –ï–∫—Å–ø–æ—Ä—Ç –ø—Ä–æ—Å—Ç–∏—Ö –¥—ñ–∞–≥—Ä–∞–º
- –ï–∫—Å–ø–æ—Ä—Ç —Å–∫–ª–∞–¥–Ω–∏—Ö –¥—ñ–∞–≥—Ä–∞–º (branching, loops)
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è .drn ‚Üî .json (round-trip)
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è
- Edge cases –∑ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è

---

### –§–∞–∑–∞ 3: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è (–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: –ù–ò–ó–¨–ö–ò–ô)

#### 3.1 –°—Ç–≤–æ—Ä–∏—Ç–∏ README –¥–ª—è DRAKON Pipeline
```markdown
# –§–∞–π–ª: /home/vokov/motia/tools/drakon/README.md
```

**–ó–º—ñ—Å—Ç:**
- –û–≥–ª—è–¥ –º–æ–¥—É–ª—è
- –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –∑ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
- –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
- API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- –†–µ—Ñ–µ—Ä–µ–Ω—Å–∏ –Ω–∞ knowledge base

#### 3.2 –î–æ–¥–∞—Ç–∏ integration tests
–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏ DRAKON Editor

#### 3.3 –°—Ç–≤–æ—Ä–∏—Ç–∏ CLI —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```bash
drakon-convert --input diagram.json --output diagram.drn
drakon-validate --file diagram.json
drakon-generate --step config-service --output diagrams/
```

---

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —ñ–º–ø–æ—Ä—Ç—É

### –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–Ω—è |
|---------|----------|
| –†—è–¥–∫—ñ–≤ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è | 5,508 |
| –¢–æ–∫–µ–Ω—ñ–≤ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è | ~50,740 |
| –í–∏—è–≤–ª–µ–Ω–æ —Ç–∏–ø—ñ–≤ —ñ–∫–æ–Ω–æ–∫ | 23 |
| –í–∏—è–≤–ª–µ–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º | 11 |
| –í–∏—è–≤–ª–µ–Ω–æ gotchas | 10 |
| –°—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–∞–≤–∏–ª –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó | 19 |

### –°—Ç–≤–æ—Ä–µ–Ω–æ

| –§–∞–π–ª | –†—è–¥–∫—ñ–≤ | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|------|--------|-------------|
| drn_complete_schema.sql | 462 | –ü–æ–≤–Ω–∞ SQLite —Å—Ö–µ–º–∞ |
| icon_types.json | 337 | –î–æ–≤—ñ–¥–Ω–∏–∫ —ñ–∫–æ–Ω–æ–∫ |
| validation_rules.json | 241 | –ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó |
| gotchas.md | 464 | –ö—Ä–∏—Ç–∏—á–Ω—ñ –ø–æ–º–∏–ª–∫–∏ |
| conversion_guide.md | 578 | –ì–∞–π–¥ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó |
| **–í–°–¨–û–ì–û** | **2,082** | **Knowledge Base** |

---

## ‚úÖ –í–∏—Å–Ω–æ–≤–∫–∏

### –©–æ –±—É–ª–æ –¥–æ—Å—è–≥–Ω—É—Ç–æ

1. ‚úÖ **–ü–æ–≤–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å** - –ì–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –æ—Ñ—ñ—Ü—ñ–π–Ω–∏—Ö —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ–π DRAKON
2. ‚úÖ **–í–∏—è–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º** - –î–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–æ 11 –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º —É –ø–æ—Ç–æ—á–Ω–∏—Ö –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞—Ö
3. ‚úÖ **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è Knowledge Base** - 2,082 —Ä—è–¥–∫–∏ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ—ó –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
4. ‚úÖ **–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó** - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –ø–∞—Ç—á—ñ —Ç–∞ –ø—Ä–∏–∫–ª–∞–¥–∏ –∫–æ–¥—É –¥–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å

### –ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –µ—Ç–∞–ø—É

**–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω:** –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ, knowledge base —Å—Ç–≤–æ—Ä–µ–Ω–æ

**–ù–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫:** –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–∞—Ç—á—ñ–≤ –¥–æ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ñ–≤

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —á–∞—Å:** 2-3 –≥–æ–¥–∏–Ω–∏ –Ω–∞ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—é –≤—Å—ñ—Ö –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å

**–†–∏–∑–∏–∫–∏:** –ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ - –≤—Å—ñ –∑–º—ñ–Ω–∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω—ñ –∑ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏

---

## üîó –ü–æ—Å–∏–ª–∞–Ω–Ω—è

### –°—Ç–≤–æ—Ä–µ–Ω—ñ —Ñ–∞–π–ª–∏
- `/home/vokov/motia/tools/drakon/knowledge_base/drn_complete_schema.sql`
- `/home/vokov/motia/tools/drakon/knowledge_base/icon_types.json`
- `/home/vokov/motia/tools/drakon/knowledge_base/validation_rules.json`
- `/home/vokov/motia/tools/drakon/knowledge_base/gotchas.md`
- `/home/vokov/motia/tools/drakon/knowledge_base/conversion_guide.md`

### –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∏ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
- `/home/vokov/motia/tools/drakon/converter/drakon_to_drn.py`
- `/home/vokov/motia/tools/drakon/converter/drakon_to_json.py`
- `/home/vokov/motia/tools/drakon/converter/generate_step_diagrams.py`

### –î–∂–µ—Ä–µ–ª–∞ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å
- `/home/vokov/motia/tools/drakon/perplexity/drndew/drndew.md`
- `/home/vokov/motia/tools/drakon/perplexity/drndew/perplexity-inwestigation.md`
- `/home/vokov/motia/tools/drakon/perplexity/drndew/claude-sonet-incestigation.md`

---

**–ó–≤—ñ—Ç –ø—ñ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ:** Claude Code (Sonnet 4.5)
**–î–∞—Ç–∞:** 2025-10-10
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –î–û –Ü–ú–ü–õ–ï–ú–ï–ù–¢–ê–¶–Ü–á
