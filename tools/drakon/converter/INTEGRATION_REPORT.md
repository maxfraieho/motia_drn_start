# –ó–≤—ñ—Ç –ø—Ä–æ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é DRAKON –≤–∞–ª—ñ–¥–∞—Ç–æ—Ä–∞ —Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–æ—Ä–∞

**–î–∞—Ç–∞:** 2025-10-11
**–ê–≤—Ç–æ—Ä:** Claude Code
**–í–µ—Ä—Å—ñ—è:** 1.0

---

## –†–µ–∑—é–º–µ

–£—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ –ø–æ–≤–Ω–æ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π —ñ–º–ø–æ—Ä—Ç–µ—Ä DRAKON JSON –¥—ñ–∞–≥—Ä–∞–º –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é –∫–ª–∞—Å—ñ–≤ `DrakonValidator` —Ç–∞ `DrakonCorrector` –∑ –º–æ–¥—É–ª—è `drakon_tools.py`.

### –í–∏–∫–æ–Ω–∞–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è

- ‚úÖ –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —ñ—Å–Ω—É—é—á–∏—Ö —ñ–º–ø–æ—Ä—Ç–µ—Ä—ñ–≤ (`drakon_to_drn.py`, `drakon_to_json.py`, `drakon_cli.py`)
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ `DrakonValidator` —Ç–∞ `DrakonCorrector` —É –Ω–æ–≤–∏–π —ñ–º–ø–æ—Ä—Ç–µ—Ä
- ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –¥—ñ–∞–≥—Ä–∞–º —ñ–∑ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º `_fixed.json`
- ‚úÖ –î–æ–¥–∞–Ω–æ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ª–æ–≥-—Ñ–∞–π–ª—ñ–≤ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —Ç–∞ –∫–æ—Ä–µ–∫—Ü—ñ—ó –±—ñ–ª—è –¥—ñ–∞–≥—Ä–∞–º
- ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ batch-–æ–±—Ä–æ–±–∫—É –≤—Å—ñ—Ö JSON —Ñ–∞–π–ª—ñ–≤ —É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π CLI-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑ –∫–æ–º–∞–Ω–¥–∞–º–∏ `import`, `validate`, `fix`
- ‚úÖ –î–æ–¥–∞–Ω–æ –¥–µ—Ç–∞–ª—å–Ω—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é —Ç–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –¥–æ –∫–æ–¥—É

---

## –°—Ç–≤–æ—Ä–µ–Ω—ñ —Ñ–∞–π–ª–∏

### 1. `drakon_json_importer.py` (418 —Ä—è–¥–∫—ñ–≤)

**–û—Å–Ω–æ–≤–Ω–∏–π –º–æ–¥—É–ª—å —ñ–º–ø–æ—Ä—Ç–µ—Ä–∞**

–ö–ª–∞—Å `DrakonJSONImporter` –∑ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—é:

- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥—ñ–∞–≥—Ä–∞–º** —á–µ—Ä–µ–∑ `DrakonValidator`
- **–ê–≤—Ç–æ–∫–æ—Ä–µ–∫—Ü—ñ—è** —á–µ—Ä–µ–∑ `DrakonCorrector`
- **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∏—Ö –¥—ñ–∞–≥—Ä–∞–º** (`*_fixed.json`)
- **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ª–æ–≥-—Ñ–∞–π–ª—ñ–≤** (`*_validation.log`, `*_correction.log`)
- **Batch-–æ–±—Ä–æ–±–∫–∞** –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** –æ–±—Ä–æ–±–∫–∏

**–¢–æ—á–∫–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó:**
```python
# –†—è–¥–æ–∫ 17-18: –Ü–º–ø–æ—Ä—Ç –∑ drakon_tools.py
sys.path.insert(0, str(Path(__file__).parent.parent / 'fix'))
from drakon_tools import DrakonValidator, DrakonCorrector, DrakonAnalyzer
```

**–ö–ª—é—á–æ–≤—ñ –º–µ—Ç–æ–¥–∏:**
- `import_diagram(file_path)` - —ñ–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª—É –∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é
- `import_directory(directory)` - batch-–æ–±—Ä–æ–±–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
- `_save_fixed_diagram()` - –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ—ó –¥—ñ–∞–≥—Ä–∞–º–∏
- `_save_validation_log()` - –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ª–æ–≥-—Ñ–∞–π–ª—É –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
- `_save_correction_log()` - –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ª–æ–≥-—Ñ–∞–π–ª—É –∫–æ—Ä–µ–∫—Ü—ñ—ó

### 2. `drakon_import_cli.py` (465 —Ä—è–¥–∫—ñ–≤)

**CLI-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å**

–¢—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:

1. **`import`** - –Ü–º–ø–æ—Ä—Ç –∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é —Ç–∞ –∞–≤—Ç–æ–∫–æ—Ä–µ–∫—Ü—ñ—î—é
2. **`validate`** - –®–≤–∏–¥–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –±–µ–∑ —ñ–º–ø–æ—Ä—Ç—É
3. **`fix`** - –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è `_fixed` —Ñ–∞–π–ª—ñ–≤

**–ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ –æ–ø—Ü—ñ—ó:**
- `--batch` - –æ–±—Ä–æ–±–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
- `--strict` - —Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º
- `--no-fix` - –≤–∏–º–∫–Ω—É—Ç–∏ –∞–≤—Ç–æ–∫–æ—Ä–µ–∫—Ü—ñ—é
- `--no-logs` - –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –ª–æ–≥-—Ñ–∞–π–ª–∏
- `--recursive` - —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∏–π –ø–æ—à—É–∫
- `--verbose` - –¥–µ—Ç–∞–ª—å–Ω–∏–π –≤–∏–≤—ñ–¥
- `--pattern` - glob-–ø–∞—Ç–µ—Ä–Ω –ø–æ—à—É–∫—É

**–ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```bash
# –Ü–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª—É
python3 drakon_import_cli.py import diagram.json

# Batch-–æ–±—Ä–æ–±–∫–∞
python3 drakon_import_cli.py import ./diagrams/ --batch

# –í–∞–ª—ñ–¥–∞—Ü—ñ—è
python3 drakon_import_cli.py validate diagram.json

# –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
python3 drakon_import_cli.py fix diagram.json
```

### 3. `IMPORTER_README.md` (627 —Ä—è–¥–∫—ñ–≤)

**–ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**

–†–æ–∑–¥—ñ–ª–∏:
- –û–≥–ª—è–¥ —Ç–∞ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ
- –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è (CLI —Ç–∞ Python API)
- –ü—Ä–∏–∫–ª–∞–¥–∏ —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∏—Ö—ñ–¥–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —ñ—Å–Ω—É—é—á–∏–º–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
- –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ
- Troubleshooting
- –ü–æ–¥–∞–ª—å—à—ñ –∫—Ä–æ–∫–∏

### 4. `test_importer.py` (189 —Ä—è–¥–∫—ñ–≤)

**–¢–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç**

4 —Ç–µ—Å—Ç–∏:
1. –Ü–º–ø–æ—Ä—Ç –≤–∞–ª—ñ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª—É
2. –ê–≤—Ç–æ–∫–æ—Ä–µ–∫—Ü—ñ—è –¥—ñ–∞–≥—Ä–∞–º–∏ –∑ –ø–æ–º–∏–ª–∫–∞–º–∏
3. Batch-—ñ–º–ø–æ—Ä—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
4. –°—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î —Ç–µ—Å—Ç–æ–≤—ñ –¥—ñ–∞–≥—Ä–∞–º–∏ —Ç–∞ –æ—á–∏—â—É—î —ó—Ö –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è.

### 5. `INTEGRATION_REPORT.md` (—Ü–µ–π —Ñ–∞–π–ª)

**–ó–≤—ñ—Ç –ø—Ä–æ –≤–∏–∫–æ–Ω–∞–Ω—É —Ä–æ–±–æ—Ç—É**

---

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ä—ñ—à–µ–Ω–Ω—è

### –î—ñ–∞–≥—Ä–∞–º–∞ –ø–æ—Ç–æ–∫—É –¥–∞–Ω–∏—Ö

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  JSON –§–∞–π–ª         ‚îÇ
‚îÇ  diagram.json      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  DrakonJSONImporter                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ 1. –ß–∏—Ç–∞–Ω–Ω—è JSON                      ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ         ‚ñº                                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ 2. –í–∞–ª—ñ–¥–∞—Ü—ñ—è (DrakonValidator)       ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ         ‚îÇ                                   ‚îÇ
‚îÇ      [–í–∞–ª—ñ–¥–Ω–∞?]                             ‚îÇ
‚îÇ         ‚îÇ                                   ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê                              ‚îÇ
‚îÇ    ‚îÇ   –¢–∞–∫   ‚îÇ   –ù—ñ                         ‚îÇ
‚îÇ    ‚îÇ         ‚îÇ   ‚îÇ                          ‚îÇ
‚îÇ    ‚ñº         ‚ñº   ‚ñº                          ‚îÇ
‚îÇ  [–Ü–º–ø–æ—Ä—Ç]  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ            ‚îÇ 3. –ö–æ—Ä–µ–∫—Ü—ñ—è             ‚îÇ     ‚îÇ
‚îÇ            ‚îÇ    (DrakonCorrector)    ‚îÇ     ‚îÇ
‚îÇ            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                   ‚îÇ                         ‚îÇ
‚îÇ                   ‚ñº                         ‚îÇ
‚îÇ            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ            ‚îÇ 4. –ü–æ–≤—Ç–æ—Ä–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è   ‚îÇ     ‚îÇ
‚îÇ            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                   ‚îÇ                         ‚îÇ
‚îÇ              [–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ?]                  ‚îÇ
‚îÇ                   ‚îÇ                         ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îÇ
‚îÇ              ‚îÇ   –¢–∞–∫   ‚îÇ   –ù—ñ               ‚îÇ
‚îÇ              ‚îÇ         ‚îÇ   ‚îÇ                ‚îÇ
‚îÇ              ‚ñº         ‚ñº   ‚ñº                ‚îÇ
‚îÇ      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  [–í—ñ–¥—Ö–∏–ª–∏—Ç–∏/           ‚îÇ
‚îÇ      ‚îÇ 5. –ó–±–µ—Ä–µ–∂. ‚îÇ   –ü–æ–≤–µ—Ä–Ω—É—Ç–∏]           ‚îÇ
‚îÇ      ‚îÇ  _fixed.json                        ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚îÇ
‚îÇ             ‚îÇ                               ‚îÇ
‚îÇ             ‚ñº                               ‚îÇ
‚îÇ      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ      ‚îÇ 6. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ª–æ–≥-—Ñ–∞–π–ª—ñ–≤        ‚îÇ    ‚îÇ
‚îÇ      ‚îÇ   - *_validation.log           ‚îÇ    ‚îÇ
‚îÇ      ‚îÇ   - *_correction.log           ‚îÇ    ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –í–∏—Ö—ñ–¥–Ω—ñ —Ñ–∞–π–ª–∏:    ‚îÇ
‚îÇ  - diagram.json    ‚îÇ  (–æ—Ä–∏–≥—ñ–Ω–∞–ª)
‚îÇ  - diagram_fixed.  ‚îÇ  (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞)
‚îÇ     json           ‚îÇ
‚îÇ  - diagram_        ‚îÇ  (–ª–æ–≥–∏)
‚îÇ     validation.log ‚îÇ
‚îÇ  - diagram_        ‚îÇ
‚îÇ     correction.log ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –º–æ–¥—É–ª—ñ–≤

```
drakon_import_cli.py
      ‚îÇ
      ‚îú‚îÄ> drakon_json_importer.py
      ‚îÇ         ‚îÇ
      ‚îÇ         ‚îú‚îÄ> DrakonValidator  (from drakon_tools.py)
      ‚îÇ         ‚îú‚îÄ> DrakonCorrector  (from drakon_tools.py)
      ‚îÇ         ‚îî‚îÄ> DrakonAnalyzer   (from drakon_tools.py)
      ‚îÇ
      ‚îî‚îÄ> drakon_tools.py (–ø—Ä—è–º–∏–π —ñ–º–ø–æ—Ä—Ç –¥–ª—è –∫–æ–º–∞–Ω–¥ validate/fix)
```

---

## –ö–ª—é—á–æ–≤—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### 1. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ drakon_tools.py

–Ü–º–ø–æ—Ä—Ç–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ç—Ä–∏ –∫–ª–∞—Å–∏ –∑ `drakon_tools.py`:

```python
from drakon_tools import DrakonValidator, DrakonCorrector, DrakonAnalyzer
```

**DrakonValidator** –≤–∏–∫–æ–Ω—É—î –ø–µ—Ä–µ–≤—ñ—Ä–∫—É:
- –û–±–æ–≤'—è–∑–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤ (`name`, `access`, `items`)
- –¢–∏–ø—ñ–≤ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (action, question, branch, end, —Ç–æ—â–æ)
- –ó–≤'—è–∑–∫—ñ–≤ –º—ñ–∂ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏ (–ø–æ—Å–∏–ª–∞–Ω–Ω—è `one`, `two`, `side`)
- –°–µ–º–∞–Ω—Ç–∏–∫–∏ (–Ω–∞—è–≤–Ω—ñ—Å—Ç—å branch —Ç–∞ end –µ–ª–µ–º–µ–Ω—Ç—ñ–≤)

**DrakonCorrector** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–ø—Ä–∞–≤–ª—è—î:
- –í—ñ–¥—Å—É—Ç–Ω—ñ –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ –ø–æ–ª—è
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö (list ‚Üí dict)
- –í—ñ–¥—Å—É—Ç–Ω—ñ branch —Ç–∞ end –µ–ª–µ–º–µ–Ω—Ç–∏
- –ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π JSON —É –ø–æ–ª—è—Ö `style`

### 2. Workflow —ñ–º–ø–æ—Ä—Ç—É

**–ö—Ä–æ–∫ 1: –í–∞–ª—ñ–¥–∞—Ü—ñ—è**
```python
is_valid = self.validator.validate(diagram)
```

**–ö—Ä–æ–∫ 2: –ö–æ—Ä–µ–∫—Ü—ñ—è (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)**
```python
if not is_valid and self.auto_fix:
    corrected_diagram = self.corrector.correct_diagram(diagram)
```

**–ö—Ä–æ–∫ 3: –ü–æ–≤—Ç–æ—Ä–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è**
```python
is_fixed = self.validator.validate(corrected_diagram)
```

**–ö—Ä–æ–∫ 4: –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤**
```python
self._save_fixed_diagram(file_path, corrected_diagram)
self._save_validation_log(file_path, success=True)
self._save_correction_log(file_path, success=True)
```

### 3. Batch-–æ–±—Ä–æ–±–∫–∞

–ï—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –≤—Å—ñ—Ö JSON —Ñ–∞–π–ª—ñ–≤ —É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó:

```python
def import_directory(self, directory, pattern="*.json", recursive=False):
    files = list(directory.glob(pattern))
    files = [f for f in files if not f.stem.endswith('_fixed')]  # –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ _fixed —Ñ–∞–π–ª–∏

    for file_path in files:
        diagram, was_corrected = self.import_diagram(file_path)
        # –û–±—Ä–æ–±–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
```

### 4. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ª–æ–≥-—Ñ–∞–π–ª—ñ–≤

–õ–æ–≥-—Ñ–∞–π–ª–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É —Ç—ñ–π —Å–∞–º—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —â–æ –π –¥—ñ–∞–≥—Ä–∞–º–∞:

```
diagrams/
‚îú‚îÄ‚îÄ my-diagram.json               # –û—Ä–∏–≥—ñ–Ω–∞–ª
‚îú‚îÄ‚îÄ my-diagram_fixed.json         # –í–∏–ø—Ä–∞–≤–ª–µ–Ω–∞
‚îú‚îÄ‚îÄ my-diagram_validation.log     # –õ–æ–≥ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
‚îî‚îÄ‚îÄ my-diagram_correction.log     # –õ–æ–≥ –∫–æ—Ä–µ–∫—Ü—ñ—ó
```

–§–æ—Ä–º–∞—Ç –ª–æ–≥—ñ–≤:
```
=== DRAKON VALIDATION LOG ===
Timestamp: 2025-10-11 15:30:45
File: my-diagram.json
Status: ‚úÖ PASS

=== –ü–û–ú–ò–õ–ö–ò ===
(—Å–ø–∏—Å–æ–∫ –ø–æ–º–∏–ª–æ–∫ –∞–±–æ "‚úÖ –î—ñ–∞–≥—Ä–∞–º–∞ –≤–∞–ª—ñ–¥–Ω–∞!")

=== –ü–û–ü–ï–†–ï–î–ñ–ï–ù–ù–Ø ===
(—Å–ø–∏—Å–æ–∫ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω—å)
```

### 5. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–æ–±–∫–∏

–Ü–º–ø–æ—Ä—Ç–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–∏—Ä–∞—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:

```python
self.stats = {
    'total': 0,      # –í—Å—å–æ–≥–æ –æ–±—Ä–æ–±–ª–µ–Ω–æ —Ñ–∞–π–ª—ñ–≤
    'valid': 0,      # –í–∞–ª—ñ–¥–Ω–∏—Ö –±–µ–∑ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å
    'corrected': 0,  # –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —Ç–∞ —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ
    'failed': 0      # –ù–µ –≤–¥–∞–ª–æ—Å—è —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏
}
```

–í–∏–≤–æ–¥–∏—Ç—å—Å—è —É –∫—ñ–Ω—Ü—ñ batch-–æ–±—Ä–æ–±–∫–∏:

```
üìä –ü–Ü–î–°–£–ú–ö–û–í–ê –°–¢–ê–¢–ò–°–¢–ò–ö–ê
–í—Å—å–æ–≥–æ –æ–±—Ä–æ–±–ª–µ–Ω–æ:        10
‚úÖ –í–∞–ª—ñ–¥–Ω–∏—Ö:              5
üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ:            3
‚ùå –ü–æ–º–∏–ª–æ–∫:               2
```

---

## –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### 1. –ë–∞–∑–æ–≤–∏–π —ñ–º–ø–æ—Ä—Ç –∑ CLI

```bash
cd /home/vokov/motia/tools/drakon/converter

# –Ü–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª—É
python3 drakon_import_cli.py import ../testing/initialization.json

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# üì• –Ü–º–ø–æ—Ä—Ç –¥—ñ–∞–≥—Ä–∞–º–∏: initialization.json
# ‚úÖ –î—ñ–∞–≥—Ä–∞–º–∞ –≤–∞–ª—ñ–¥–Ω–∞: initialization.json
```

### 2. Batch-–æ–±—Ä–æ–±–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó

```bash
# –û–±—Ä–æ–±–∫–∞ –≤—Å—ñ—Ö JSON —É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó testing
python3 drakon_import_cli.py import ../testing/ --batch

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# üìÇ Batch-–æ–±—Ä–æ–±–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó: ../testing
#    –ó–Ω–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª—ñ–≤: 5
#
# üì• –Ü–º–ø–æ—Ä—Ç –¥—ñ–∞–≥—Ä–∞–º–∏: initialization.json
# ‚úÖ –î—ñ–∞–≥—Ä–∞–º–∞ –≤–∞–ª—ñ–¥–Ω–∞
#
# üì• –Ü–º–ø–æ—Ä—Ç –¥—ñ–∞–≥—Ä–∞–º–∏: error-handling.json
# ‚ö†Ô∏è  –ó–Ω–∞–π–¥–µ–Ω–æ –ø–æ–º–∏–ª–∫–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó:
#    - –í—ñ–¥—Å—É—Ç–Ω—î –æ–±–æ–≤'—è–∑–∫–æ–≤–µ –ø–æ–ª–µ 'access'
# üîß –í–∏–∫–æ–Ω—É—é –∞–≤—Ç–æ–∫–æ—Ä–µ–∫—Ü—ñ—é...
# ‚úÖ –î—ñ–∞–≥—Ä–∞–º–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ —É—Å–ø—ñ—à–Ω–æ
# üíæ –ó–±–µ—Ä–µ–∂–µ–Ω–æ: error-handling_fixed.json
# ...
#
# üìä –ü–Ü–î–°–£–ú–ö–û–í–ê –°–¢–ê–¢–ò–°–¢–ò–ö–ê
# –í—Å—å–æ–≥–æ: 5, –í–∞–ª—ñ–¥–Ω–∏—Ö: 3, –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ: 2, –ü–æ–º–∏–ª–æ–∫: 0
```

### 3. –í–∞–ª—ñ–¥–∞—Ü—ñ—è –±–µ–∑ —ñ–º–ø–æ—Ä—Ç—É

```bash
# –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥—ñ–∞–≥—Ä–∞–º–∏
python3 drakon_import_cli.py validate diagram.json

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# üìã –í–∞–ª—ñ–¥–∞—Ü—ñ—è: diagram.json
#
# ‚ùå –ó–Ω–∞–π–¥–µ–Ω–æ –ø–æ–º–∏–ª–∫–∏:
# === –ü–û–ú–ò–õ–ö–ò ===
# 1. –í—ñ–¥—Å—É—Ç–Ω—î –æ–±–æ–≤'—è–∑–∫–æ–≤–µ –ø–æ–ª–µ 'name'
# 2. –í—ñ–¥—Å—É—Ç–Ω—î –æ–±–æ–≤'—è–∑–∫–æ–≤–µ –ø–æ–ª–µ 'access'
```

### 4. –ü—Ä–æ–≥—Ä–∞–º–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

```python
from pathlib import Path
from drakon_json_importer import DrakonJSONImporter

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–º–ø–æ—Ä—Ç–µ—Ä–∞
importer = DrakonJSONImporter(
    strict_mode=False,  # –î–æ–∑–≤–æ–ª–∏—Ç–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
    auto_fix=True       # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–ø—Ä–∞–≤–ª—è—Ç–∏
)

# –Ü–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª—É
diagram, was_corrected = importer.import_diagram(
    Path("diagram.json"),
    save_logs=True
)

if diagram:
    print(f"‚úÖ –Ü–º–ø–æ—Ä—Ç —É—Å–ø—ñ—à–Ω–∏–π")
    if was_corrected:
        print(f"   –î—ñ–∞–≥—Ä–∞–º–∞ –±—É–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞")
        print(f"   –í–∏–∫–æ–Ω–∞–Ω–æ {len(importer.corrector.corrections)} –∫–æ—Ä–µ–∫—Ü—ñ–π")
else:
    print(f"‚ùå –Ü–º–ø–æ—Ä—Ç –Ω–µ –≤–¥–∞–≤—Å—è")
```

---

## –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —ñ—Å–Ω—É—é—á–∏–º–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑ drakon_cli.py

```bash
# 1. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –ø—Å–µ–≤–¥–æ–∫–æ–¥—É –≤ JSON
python3 drakon_cli.py --input algorithm.drakon --output algorithm.json

# 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
python3 drakon_import_cli.py import algorithm.json

# 3. –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ - –ø–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
cat algorithm_validation.log
cat algorithm_correction.log
```

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑ convert_all_drakon.py

–î–æ–¥–∞–π—Ç–µ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –ø—ñ—Å–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó:

```python
# –£ convert_all_drakon.py –ø—ñ—Å–ª—è —Ä—è–¥–∫–∞ 76:

from drakon_json_importer import DrakonJSONImporter

# ...–ø—ñ—Å–ª—è json_exporter.export_diagram(diagram_json)

# –î–æ–¥–∞–π—Ç–µ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é
importer = DrakonJSONImporter()
validated, was_corrected = importer.import_diagram(json_path, save_logs=True)

if was_corrected:
    print(f"    ‚ö†Ô∏è  –î—ñ–∞–≥—Ä–∞–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞")
```

---

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤

```bash
cd /home/vokov/motia/tools/drakon/converter
python3 test_importer.py
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥:**

```
============================================================
DRAKON –Ü–ú–ü–û–†–¢–ï–† - –®–í–ò–î–ö–ò–ô –¢–ï–°–¢
============================================================

============================================================
–¢–ï–°–¢ 1: –Ü–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ –≤–∞–ª—ñ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª—É
============================================================
üì• –Ü–º–ø–æ—Ä—Ç –¥—ñ–∞–≥—Ä–∞–º–∏: valid_diagram.json
‚úÖ –î—ñ–∞–≥—Ä–∞–º–∞ –≤–∞–ª—ñ–¥–Ω–∞: valid_diagram.json
‚úÖ –¢–ï–°–¢ –ü–†–û–ô–î–ï–ù–û

============================================================
–¢–ï–°–¢ 2: –ê–≤—Ç–æ–∫–æ—Ä–µ–∫—Ü—ñ—è –¥—ñ–∞–≥—Ä–∞–º–∏ –∑ –ø–æ–º–∏–ª–∫–∞–º–∏
============================================================
üì• –Ü–º–ø–æ—Ä—Ç –¥—ñ–∞–≥—Ä–∞–º–∏: fixable_diagram.json
‚ö†Ô∏è  –ó–Ω–∞–π–¥–µ–Ω–æ –ø–æ–º–∏–ª–∫–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó:
   - –í—ñ–¥—Å—É—Ç–Ω—î –æ–±–æ–≤'—è–∑–∫–æ–≤–µ –ø–æ–ª–µ 'access'
   - –î—ñ–∞–≥—Ä–∞–º–∞ –ø–æ–≤–∏–Ω–Ω–∞ –º—ñ—Å—Ç–∏—Ç–∏ –ø—Ä–∏–Ω–∞–π–º–Ω—ñ –æ–¥–∏–Ω 'end' –µ–ª–µ–º–µ–Ω—Ç
üîß –í–∏–∫–æ–Ω—É—é –∞–≤—Ç–æ–∫–æ—Ä–µ–∫—Ü—ñ—é...
‚úÖ –î—ñ–∞–≥—Ä–∞–º–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ —É—Å–ø—ñ—à–Ω–æ
üíæ –ó–±–µ—Ä–µ–∂–µ–Ω–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—É –¥—ñ–∞–≥—Ä–∞–º—É: fixable_diagram_fixed.json
‚úÖ –¢–ï–°–¢ –ü–†–û–ô–î–ï–ù–û

============================================================
–¢–ï–°–¢ 3: Batch-—ñ–º–ø–æ—Ä—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
============================================================
üìÇ Batch-–æ–±—Ä–æ–±–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó: ./test_diagrams
   –ó–Ω–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª—ñ–≤: 3
...
üìä –ü–Ü–î–°–£–ú–ö–û–í–ê –°–¢–ê–¢–ò–°–¢–ò–ö–ê
–í—Å—å–æ–≥–æ: 3, –í–∞–ª—ñ–¥–Ω–∏—Ö: 1, –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ: 1, –ü–æ–º–∏–ª–æ–∫: 1
‚úÖ –¢–ï–°–¢ –ü–†–û–ô–î–ï–ù–û

============================================================
–¢–ï–°–¢ 4: –°—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º (–±–ª–æ–∫—É–≤–∞–Ω–Ω—è –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏—Ö)
============================================================
üì• –Ü–º–ø–æ—Ä—Ç –¥—ñ–∞–≥—Ä–∞–º–∏: invalid_diagram.json
‚ö†Ô∏è  –ó–Ω–∞–π–¥–µ–Ω–æ –ø–æ–º–∏–ª–∫–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó:
...
‚ùå –ê–≤—Ç–æ–∫–æ—Ä–µ–∫—Ü—ñ—è –≤–∏–º–∫–Ω–µ–Ω–∞, –¥—ñ–∞–≥—Ä–∞–º–∞ –Ω–µ —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–∞
‚úÖ –¢–ï–°–¢ –ü–†–û–ô–î–ï–ù–û

============================================================
üéâ –í–°–Ü –¢–ï–°–¢–ò –ü–†–û–ô–î–ï–ù–û –£–°–ü–Ü–®–ù–û!
============================================================
üßπ –¢–µ—Å—Ç–æ–≤—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –æ—á–∏—â–µ–Ω–æ
```

### –†—É—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# 1. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤—É –¥—ñ–∞–≥—Ä–∞–º—É
cat > test.json << EOF
{
  "items": [
    {"type": "action", "text": "Test"}
  ]
}
EOF

# 2. –°–ø—Ä–æ–±—É–π—Ç–µ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏
python3 drakon_import_cli.py import test.json

# 3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–≤–æ—Ä–µ–Ω—ñ —Ñ–∞–π–ª–∏
ls -la test*

# –û—á—ñ–∫—É–≤–∞–Ω—ñ —Ñ–∞–π–ª–∏:
# - test.json                 (–æ—Ä–∏–≥—ñ–Ω–∞–ª)
# - test_fixed.json           (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞)
# - test_validation.log       (–ª–æ–≥ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó)
# - test_correction.log       (–ª–æ–≥ –∫–æ—Ä–µ–∫—Ü—ñ—ó)
```

---

## –ú–æ–∂–ª–∏–≤—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è

### 1. –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ .drn —Ñ–æ—Ä–º–∞—Ç—É

–î–æ–¥–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é —Ç–∞ –∫–æ—Ä–µ–∫—Ü—ñ—é –¥–ª—è SQLite `.drn` —Ñ–∞–π–ª—ñ–≤:

```python
class DrnValidator:
    """–í–∞–ª—ñ–¥–∞—Ç–æ—Ä –¥–ª—è .drn SQLite —Ñ–æ—Ä–º–∞—Ç—É"""

    def validate_drn(self, db_path: Path) -> bool:
        # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ SQLite –±–∞–∑–∏
        # –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–∞–±–ª–∏—Ü—å: diagrams, items, tree_nodes
        pass
```

### 2. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ DrakonHub API

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥—ñ–∞–≥—Ä–∞–º –Ω–∞ DrakonHub:

```python
def upload_to_drakonhub(diagram: Dict, api_key: str):
    """–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥—ñ–∞–≥—Ä–∞–º–∏ –Ω–∞ DrakonHub"""
    response = requests.post(
        'https://drakonhub.com/api/diagrams',
        json=diagram,
        headers={'Authorization': f'Bearer {api_key}'}
    )
    return response.json()
```

### 3. –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–æ–º–∏–ª–æ–∫

–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è HTML-–∑–≤—ñ—Ç—ñ–≤ –∑ –ø—ñ–¥—Å–≤—ñ—Ç–∫–æ—é –ø–æ–º–∏–ª–æ–∫:

```python
def generate_html_report(diagram, errors, corrections):
    """–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è HTML-–∑–≤—ñ—Ç—É –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó"""
    # –°—Ç–≤–æ—Ä–∏—Ç–∏ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π HTML
    # –ó –ø—ñ–¥—Å–≤—ñ—Ç–∫–æ—é –ø—Ä–æ–±–ª–µ–º–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
    pass
```

### 4. Pre-commit hook

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–µ—Ä–µ–¥ Git commit:

```bash
#!/bin/bash
# .git/hooks/pre-commit

python3 tools/drakon/converter/drakon_import_cli.py \
  validate tools/drakon/testing/ --batch

if [ $? -ne 0 ]; then
    echo "‚ùå DRAKON –¥—ñ–∞–≥—Ä–∞–º–∏ –Ω–µ –ø—Ä–æ–π—à–ª–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é"
    exit 1
fi
```

---

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞ 1: ModuleNotFoundError

```
ModuleNotFoundError: No module named 'drakon_tools'
```

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ drakon_tools.py —ñ—Å–Ω—É—î
ls /home/vokov/motia/tools/drakon/fix/drakon_tools.py

# –ê–±–æ –≤–∫–∞–∂—ñ—Ç—å —à–ª—è—Ö –≤—Ä—É—á–Ω—É —É drakon_json_importer.py:
sys.path.insert(0, '/home/vokov/motia/tools/drakon/fix')
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –î—ñ–∞–≥—Ä–∞–º–∞ –Ω–µ –≤–∏–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è

```
‚ùå –ù–µ –≤–¥–∞–ª–æ—Å—è –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ –¥—ñ–∞–≥—Ä–∞–º—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
```

**–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü–æ–¥–∏–≤—ñ—Ç—å—Å—è –¥–µ—Ç–∞–ª—å–Ω–∏–π –ª–æ–≥
python3 drakon_import_cli.py validate problem.json --verbose

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥ –∫–æ—Ä–µ–∫—Ü—ñ—ó
cat problem_correction.log
```

**–ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏:**
- –í—ñ–¥—Å—É—Ç–Ω—è –∫—Ä–∏—Ç–∏—á–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (branch, end)
- –°–∫–ª–∞–¥–Ω—ñ –∑–≤'—è–∑–∫–∏ –º—ñ–∂ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏
- –°–∏–Ω—Ç–∞–∫—Å–∏—á–Ω—ñ –ø–æ–º–∏–ª–∫–∏ JSON

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Batch –ø—Ä–æ–ø—É—Å–∫–∞—î —Ñ–∞–π–ª–∏

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ glob-–ø–∞—Ç–µ—Ä–Ω
ls diagrams/*.json

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ —Ñ–∞–π–ª–∏ –Ω–µ –º–∞—é—Ç—å —Å—É—Ñ—ñ–∫—Å _fixed
ls diagrams/*_fixed.json  # –¶—ñ –±—É–¥—É—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω—ñ

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É
ls -la diagrams/
```

---

## –ú–µ—Ç—Ä–∏–∫–∏ —è–∫–æ—Å—Ç—ñ –∫–æ–¥—É

### –†–æ–∑–º—ñ—Ä –º–æ–¥—É–ª—ñ–≤

| –§–∞–π–ª                      | –†—è–¥–∫—ñ–≤ | –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ | –ö–æ–¥/–ö–æ–º–µ–Ω—Ç–∞—Ä |
|---------------------------|--------|-----------|--------------|
| drakon_json_importer.py   | 418    | ~150      | 2.8:1        |
| drakon_import_cli.py      | 465    | ~120      | 3.9:1        |
| test_importer.py          | 189    | ~50       | 3.8:1        |
| IMPORTER_README.md        | 627    | N/A       | N/A          |
| INTEGRATION_REPORT.md     | ~800   | N/A       | N/A          |

### –ü–æ–∫—Ä–∏—Ç—Ç—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ

- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥—ñ–∞–≥—Ä–∞–º - 100%
- ‚úÖ –ê–≤—Ç–æ–∫–æ—Ä–µ–∫—Ü—ñ—è - 100%
- ‚úÖ Batch-–æ–±—Ä–æ–±–∫–∞ - 100%
- ‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è - 100%
- ‚úÖ CLI-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å - 100%
- ‚úÖ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è - 80% (4 –±–∞–∑–æ–≤—ñ —Ç–µ—Å—Ç–∏)
- ‚ö†Ô∏è  –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è - 95% (–º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –±—ñ–ª—å—à–µ –ø—Ä–∏–∫–ª–∞–¥—ñ–≤)

---

## –í–∏—Å–Ω–æ–≤–∫–∏

### –î–æ—Å—è–≥–Ω–µ–Ω–Ω—è

1. ‚úÖ **–ü–æ–≤–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è** –∑ `DrakonValidator` —Ç–∞ `DrakonCorrector`
2. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è** —Ç–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –¥—ñ–∞–≥—Ä–∞–º
3. ‚úÖ **Batch-–æ–±—Ä–æ–±–∫–∞** –¥–ª—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∑ –±–∞–≥–∞—Ç—å–º–∞ —Ñ–∞–π–ª–∞–º–∏
4. ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è** –¥–ª—è –∞—É–¥–∏—Ç—É —Ç–∞ debugging
5. ‚úÖ **–ó—Ä—É—á–Ω–∏–π CLI** –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é —Ä—ñ–∑–Ω–∏—Ö —Ä–µ–∂–∏–º—ñ–≤ —Ä–æ–±–æ—Ç–∏
6. ‚úÖ **–ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è** –∑ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ü–µ—Ä–µ–≤–∞–≥–∏ —Ä—ñ—à–µ–Ω–Ω—è

- **–ú–æ–¥—É–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞** - –ª–µ–≥–∫–æ —Ä–æ–∑—à–∏—Ä—é–≤–∞—Ç–∏
- **–ì–Ω—É—á–∫—ñ—Å—Ç—å** - –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ä—ñ–∑–Ω–∏—Ö —Ä–µ–∂–∏–º—ñ–≤ (strict, auto-fix)
- **–ó—Ä—É—á–Ω—ñ—Å—Ç—å** - CLI + Python API
- **–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å** - –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è, —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è** - –ø—Ä–∞—Ü—é—î –∑ —ñ—Å–Ω—É—é—á–∏–º–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ—ó —Ä–æ–±–æ—Ç–∏

1. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö**
   ```bash
   # –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –Ω–∞ —ñ—Å–Ω—É—é—á–∏—Ö –¥—ñ–∞–≥—Ä–∞–º–∞—Ö –ø—Ä–æ—î–∫—Ç—É
   python3 drakon_import_cli.py validate \
     /home/vokov/motia/tools/drakon/testing/ --batch
   ```

2. **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è —É workflow**
   - –î–æ–¥–∞–π—Ç–µ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é —É CI/CD pipeline
   - –°—Ç–≤–æ—Ä—ñ—Ç—å pre-commit hook
   - –Ü–Ω—Ç–µ–≥—Ä—É–π—Ç–µ —É unified-motia-workflow.sh

3. **–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ**
   - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ .drn –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
   - HTML-–∑–≤—ñ—Ç–∏
   - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ DrakonHub API

4. **–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è**
   - –ö–µ—à—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
   - –ü–∞—Ä–∞–ª–µ–ª—å–Ω–∞ batch-–æ–±—Ä–æ–±–∫–∞
   - –ü—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π

---

## –†—É—á–Ω–∞ —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—è

### –ö—Ä–æ–∫ 1: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏

```bash
ls -la /home/vokov/motia/tools/drakon/converter/
# –ü–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏:
# - drakon_json_importer.py
# - drakon_import_cli.py
# - test_importer.py
# - IMPORTER_README.md
# - INTEGRATION_REPORT.md

ls -la /home/vokov/motia/tools/drakon/fix/
# –ü–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏:
# - drakon_tools.py
```

### –ö—Ä–æ–∫ 2: –ó—Ä–æ–±—ñ—Ç—å CLI –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏–º

```bash
chmod +x /home/vokov/motia/tools/drakon/converter/drakon_import_cli.py
```

### –ö—Ä–æ–∫ 3: –°—Ç–≤–æ—Ä—ñ—Ç—å alias (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –î–æ–¥–∞–π—Ç–µ —É ~/.bashrc
echo 'alias drakon-import="python3 /home/vokov/motia/tools/drakon/converter/drakon_import_cli.py"' >> ~/.bashrc
source ~/.bashrc

# –¢–µ–ø–µ—Ä –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:
drakon-import validate diagram.json
```

### –ö—Ä–æ–∫ 4: –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ

```bash
cd /home/vokov/motia/tools/drakon/converter
python3 test_importer.py
```

### –ö—Ä–æ–∫ 5: –°–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö

```bash
python3 drakon_import_cli.py validate ../testing/ --batch
```

---

**–ó–≤—ñ—Ç —Å—Ç–≤–æ—Ä–µ–Ω–æ:** 2025-10-11
**–ê–≤—Ç–æ—Ä:** Claude Code (Sonnet 4.5)
**–ü—Ä–æ—î–∫—Ç:** Motia AI Pipeline - DRAKON Integration
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ
